import y from"./ContentDoc.bb78ecea.js";import{M as A,A as C,J as $,a1 as w,I as x,$ as k,X as q,a as R,u as b,c as B,w as S,q as U,K as v,o as h,f as M}from"./entry.8b9e45bf.js";import{q as N}from"./query.0f38591b.js";import"./ContentRenderer.426bde67.js";import"./ContentRendererMarkdown.1acbeb27.js";import"./index.a6ef77ff.js";import"./preview.715ac317.js";import"./ContentQuery.dc99a0ba.js";import"./utils.dbf165ee.js";const K={__name:"[...content-page]",async setup(O){var p,u,m;let i,c;const r=A(),g=v(),s=r.path!=="/"&&r.path.endsWith("/");C(async()=>{if(s){const{path:t,query:e,hash:o}=r,_={path:t.replace(/\/+$/,""),query:e,hash:o};await $(_,{replace:!0})}});let n=null;try{n=([i,c]=w(()=>N(x(r.path)).only(["og","description","title"]).findOne()),i=await i,c(),i)}catch{}if(n){const t=((p=n.og)==null?void 0:p.title)??n.title,e=l(((u=n.og)==null?void 0:u.image)??"logo-primary-og.png"),o=f(d(((m=n.og)==null?void 0:m.description)??n.description),150),a=l(r.path);k({title:t,meta:[{hid:"og:url",property:"og:url",content:a},{hid:"og:title",property:"og:title",content:t},{hid:"description",property:"description",content:o},{hid:"og:description",property:"og:description",content:o},{hid:"og:image",property:"og:image",content:e}]})}function l(t){const{protocol:e,authority:o,baseUrl:a}=g.public;return`${e}://${q(o,a,t)}`}function d(t=" "){return t.replaceAll(`
`," ").replaceAll("	"," ").replaceAll("\r"," ").replaceAll("!",".").replaceAll("?",".").replaceAll("...",".").split(".").shift()}function f(t,e){return t.length>=e?`${t.substring(0,e-3)}...`:`${t}.`}return(t,e)=>{const o=y;return h(),R("div",null,[b(s)?U("",!0):(h(),B(o,{key:0,head:!1},{"not-found":S(()=>[M(o,{path:"/not-found",head:!1})]),_:1}))])}}};export{K as default};
